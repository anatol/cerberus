#!/usr/bin/env ruby

# Add lib dir to load path so that we don't have to be installed in rubygems
require 'pathname' # Use Pathname to follow symlinks
CERBERUS_LIB_DIR = File.join(File.dirname(Pathname.new(__FILE__).realpath),'..','lib')
$: << CERBERUS_LIB_DIR 

require 'cerberus/cli'
require 'cerberus/latch'

Cerberus::Latch.lock('/tmp/cerberus.lock', :lock_ttl => 2 * Cerberus::LOCK_WAIT ) do
  Cerberus::CLI.new(*ARGV)
end
